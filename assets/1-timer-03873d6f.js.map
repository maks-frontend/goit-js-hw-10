{"version":3,"file":"1-timer-03873d6f.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startBtn = document.querySelector('button[data-start]');\nconst input = document.querySelector('#datetime-picker');\nconst selectedDay = document.querySelector('.value[data-days]');\nconst selectedHour = document.querySelector('.value[data-hours]');\nconst selectedMinute = document.querySelector('.value[data-minutes]');\nconst selectedSecond = document.querySelector('.value[data-seconds]');\n\nlet userSelectedDate = null;\nlet intervalId = null;\nstartBtn.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  locale: {\n    firstDayOfWeek: 1,\n  },\n  onClose(selectedDates) {\n    if (selectedDates[0].getTime() > Date.now()) {\n      userSelectedDate = selectedDates[0].getTime();\n      startBtn.disabled = false;\n    } else {\n      startBtn.disabled = true;\n      return iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#fff',\n        timeout: 1500,\n      });\n    }\n  },\n  onChange(selectedDates) {\n    if (selectedDates[0].getTime() <= Date.now()) {\n      startBtn.disabled = true;\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction start() {\n  if (userSelectedDate === null) {\n    return;\n  }\n  startBtn.disabled = true;\n  input.disabled = true;\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    let elapsedTime = userSelectedDate - currentTime;\n    elapsedTime = Math.max(elapsedTime, 0);\n    updateClockface(convertMs(elapsedTime));\n    if (elapsedTime <= 0) {\n      clearInterval(intervalId);\n      input.disabled = false;\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = addLeadingZero(Math.floor(ms / day));\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  const minutes = addLeadingZero(Math.floor((ms % hour) / minute));\n  const seconds = addLeadingZero(Math.floor((ms % minute) / second));\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateClockface({ days, hours, minutes, seconds }) {\n  selectedDay.innerHTML = `${days}`;\n  selectedHour.innerHTML = `${hours}`;\n  selectedMinute.innerHTML = `${minutes}`;\n  selectedSecond.innerHTML = `${seconds}`;\n}\n\nstartBtn.addEventListener('click', start);"],"names":["startBtn","input","selectedDay","selectedHour","selectedMinute","selectedSecond","userSelectedDate","intervalId","options","selectedDates","iziToast","flatpickr","start","currentTime","elapsedTime","updateClockface","convertMs","ms","days","addLeadingZero","hours","minutes","seconds","value"],"mappings":"2CAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAc,SAAS,cAAc,mBAAmB,EACxDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAiB,SAAS,cAAc,sBAAsB,EAC9DC,EAAiB,SAAS,cAAc,sBAAsB,EAEpE,IAAIC,EAAmB,KACnBC,EAAa,KACjBP,EAAS,SAAW,GAEpB,MAAMQ,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,OAAQ,CACN,eAAgB,CACjB,EACD,QAAQC,EAAe,CACrB,GAAIA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,MACpCH,EAAmBG,EAAc,CAAC,EAAE,QAAO,EAC3CT,EAAS,SAAW,OAEpB,QAAAA,EAAS,SAAW,GACbU,EAAS,MAAM,CACpB,QAAS,qCACT,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,QAAS,IACjB,CAAO,CAEJ,EACD,SAASD,EAAe,CAClBA,EAAc,CAAC,EAAE,QAAO,GAAM,KAAK,QACrCT,EAAS,SAAW,GAEvB,CACH,EAEAW,EAAU,mBAAoBH,CAAO,EAErC,SAASI,GAAQ,CACXN,IAAqB,OAGzBN,EAAS,SAAW,GACpBC,EAAM,SAAW,GACjBM,EAAa,YAAY,IAAM,CAC7B,MAAMM,EAAc,KAAK,MACzB,IAAIC,EAAcR,EAAmBO,EACrCC,EAAc,KAAK,IAAIA,EAAa,CAAC,EACrCC,EAAgBC,EAAUF,CAAW,CAAC,EAClCA,GAAe,IACjB,cAAcP,CAAU,EACxBN,EAAM,SAAW,GAEpB,EAAE,GAAI,EACT,CAEA,SAASe,EAAUC,EAAI,CAMrB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAC1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EACpDI,EAAUF,EAAe,KAAK,MAAOF,EAAK,KAAQ,GAAM,CAAC,EACzDK,EAAUH,EAAe,KAAK,MAAOF,EAAK,IAAU,GAAM,CAAC,EACjE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAAeI,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASR,EAAgB,CAAE,KAAAG,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DpB,EAAY,UAAY,GAAGgB,CAAI,GAC/Bf,EAAa,UAAY,GAAGiB,CAAK,GACjChB,EAAe,UAAY,GAAGiB,CAAO,GACrChB,EAAe,UAAY,GAAGiB,CAAO,EACvC,CAEAtB,EAAS,iBAAiB,QAASY,CAAK"}